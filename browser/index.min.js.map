{"version":3,"sources":["index.min.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","FloGrahamScan","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","_dereq_","stableSort","arr","indxArray","push","sort","b","res","sorted","_i","swap","temp","getSmallestIndxYThenX","ps","smallest","Number","POSITIVE_INFINITY","smallestI","y","grahamScan","ps_","includeAllBoundaryPoints","delta","undefined","DELTA","slice","idx","_ps$splice","splice","_ps$splice2","_slicedToArray","p","Vector","cross","fromTo","Math","abs","unshift","m","p1","p2","p3","ccw","sliceIterator","_arr","_n","_d","_e","_s","Symbol","iterator","next","done","value","err","Array","isArray","Object","TypeError","flo-vector2d","2","dot","segSegIntersection","ab","cd","_ab","_cd","c","d","denom","rNumer","sNumer","doesSegSegIntersect","squaredDistanceBetween","x","scale","factor","reverse","toUnitVector","scaleFactor","toLength","len","interpolate","mean","distanceBetween","sqrt","lengthSquared","v","manhattanDistanceBetween","manhattanLength","distanceBetweenPointAndLine","_p","x0","y0","_l","_l$","x1","y1","_l$2","x2","y2","squaredDistanceBetweenPointAndLineSegment","w","l2","max","min","circumCenter","triangle","Sx","det3","Sy","inCenter","l1","l3","lengthSum","centroid","polygon","A","p0","_p2","C","_p3","_p4","z","translate","rotate","sinθ","cosθ","equal","reverseRotate","rotate90Degrees","rotateNeg90Degrees","transform","getClosestTo","cp","bestd","p_","translateThenRotatePs","map","rotateThenTranslatePs","rotatePs","f2","fPs","translatePs","f1"],"mappings":"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","file":"index.min.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.FloGrahamScan = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n'use strict';\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar Vector = _dereq_('flo-vector2d');\n\nvar DELTA = 1e-10;\n\n/**\r\n * Performs a functional stable sort on the given array and \r\n * returns the newly sorted array.\r\n * @ignore\r\n */\nfunction stableSort(arr, f) {\n\tvar indxArray = [];\n\tfor (var i = 0; i < arr.length; i++) {\n\t\tindxArray.push(i);\n\t}\n\n\tindxArray.sort(function (a, b) {\n\t\tvar res = f(arr[a], arr[b]);\n\n\t\tif (res !== 0) {\n\t\t\treturn res;\n\t\t}\n\n\t\treturn a - b;\n\t});\n\n\tvar sorted = [];\n\tfor (var _i = 0; _i < arr.length; _i++) {\n\t\tsorted.push(arr[indxArray[_i]]);\n\t}\n\n\treturn sorted;\n}\n\n/**\r\n * In-place swap two elements in the given array.\r\n * @ignore\r\n */\nfunction swap(arr, a, b) {\n\tif (a === b) {\n\t\treturn;\n\t}\n\n\tvar temp = arr[a];\n\tarr[a] = arr[b];\n\tarr[b] = temp;\n}\n\n/**\r\n * @ignore\r\n */\nfunction getSmallestIndxYThenX(ps) {\n\tvar smallest = [Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY];\n\tvar smallestI = void 0;\n\tfor (var i = 0; i < ps.length; i++) {\n\t\tvar y = ps[i][1];\n\t\tif (y < smallest[1] || y === smallest[1] && ps[i][0] < smallest[0]) {\n\t\t\tsmallestI = i;\n\t\t\tsmallest = ps[i];\n\t\t}\n\t}\n\n\treturn smallestI;\n}\n\n/** \r\n * <p>\r\n * Finds the convex hull of the given set of 2d points using the   \r\n * Graham Scan algorithm and returns the hull as an array of points. \r\n * </p>\r\n * <p>\r\n * See https://en.wikipedia.org/wiki/Graham_scan\r\n * </p>\r\n * @param {number[][]} ps_ - A set of points\r\n * @param {boolean} includeAllBoundaryPoints - Set this to true to if all boundary points\r\n * should be returned, even redundant ones - defaults to false\r\n * @param {number} delta - Tolerance at which three points are considered collinear -\r\n * defaults to 1e-10\r\n * @returns {number[][]}\r\n */\nfunction grahamScan(ps_, includeAllBoundaryPoints, delta) {\n\tincludeAllBoundaryPoints = !!includeAllBoundaryPoints;\n\tdelta = delta === undefined ? DELTA : delta;\n\n\tfunction fail(p1, p2, p3) {\n\t\tvar res = Vector.ccw(p1, p2, p3, delta);\n\t\tif (includeAllBoundaryPoints) {\n\t\t\treturn res < 0;\n\t\t}\n\t\treturn res <= 0;\n\t}\n\n\tvar ps = ps_.slice();\n\tvar n = ps.length;\n\n\tvar idx = getSmallestIndxYThenX(ps);\n\n\tvar _ps$splice = ps.splice(idx, 1),\n\t    _ps$splice2 = _slicedToArray(_ps$splice, 1),\n\t    p = _ps$splice2[0];\n\n\tps = stableSort(ps, function (a, b) {\n\t\tvar res = Vector.cross(Vector.fromTo(p, b), Vector.fromTo(p, a));\n\t\tres = Math.abs(res) < delta ? 0 : res;\n\t\tif (res !== 0) {\n\t\t\treturn res;\n\t\t}\n\n\t\tres = a[1] - b[1];\n\t\tres = Math.abs(res) < delta ? 0 : res;\n\t\tif (res !== 0) {\n\t\t\treturn res;\n\t\t}\n\n\t\treturn a[0] - b[0];\n\t});\n\n\tps.unshift(p);\n\n\tvar m = 1;\n\tfor (var i = 2; i < n; i++) {\n\t\twhile (fail(ps[m - 1], ps[m], ps[i])) {\n\t\t\tif (m > 1) {\n\t\t\t\tm -= 1;\n\t\t\t\tcontinue;\n\t\t\t} else if (i === n - 1) {\n\t\t\t\tm -= 1;\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\ti += 1;\n\t\t\t}\n\t\t}\n\n\t\tm += 1;\n\t\tswap(ps, m, i);\n\t}\n\n\treturn ps.slice(0, m + 1);\n}\n\nmodule.exports = grahamScan;\n\n},{\"flo-vector2d\":2}],2:[function(_dereq_,module,exports){\n'use strict';\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar DELTA = 1e-10;\n\n/** \r\n * Returns the dot (inner) product between two 2-vectors. \r\n * @param {number} a - The first vector\r\n * @param {number} b - The second vector\r\n * @returns {number}\r\n */\nfunction dot(a, b) {\n\treturn a[0] * b[0] + a[1] * b[1];\n}\n\n/** \r\n * Returns the cross product signed magnitude between two 2-vectors.\r\n * @param {number[]} a - The first vector\r\n * @param {number[]} b - The second vector\r\n * @returns {number}\r\n */\nfunction cross(a, b) {\n\treturn a[0] * b[1] - a[1] * b[0];\n}\n\n/**\r\n * Three 2d points are a counter-clockwise turn if ccw > 0, \r\n * clockwise if ccw < 0, and colinear if ccw = 0 because ccw is a \r\n * determinant that gives twice the signed area of the triangle formed \r\n * by p1, p2 and p3.\r\n * @param {number[]} p1 - The first point\r\n * @param {number[]} p2 - The second point\r\n * @param {number[]} p3 - The third point\r\n * @param {number} [delta] - The tolerance at which the three points are \r\n * considered colinear - defaults to 1e-10\r\n * @returns {number}\r\n */\nfunction ccw(p1, p2, p3, delta) {\n\tdelta = delta === undefined ? DELTA : delta;\n\n\tvar res = (p2[0] - p1[0]) * (p3[1] - p1[1]) - (p2[1] - p1[1]) * (p3[0] - p1[0]);\n\n\treturn Math.abs(res) <= delta ? 0 : res;\n}\n\n/**\r\n * <p>\r\n * Finds the point where two 2d line segments intersect.\r\n * </p>\r\n * <p>\r\n * See <a href=\"http://algs4.cs.princeton.edu/91primitives\">Geometric primitves</a>\r\n * </p> \r\n * @param {number[][]} ab - The first line \r\n * @param {number[][]} cd - The second line\r\n * @param {number} [delta] - The tolerance at which the lines are considered \r\n * parallel - defaults to 1e-10\r\n * @returns {number[]} The point where the two line segments intersect  \r\n * or undefined if they don't intersect or a line if they intersect at \r\n * infinitely many points. \r\n */\nfunction segSegIntersection(ab, cd, delta) {\n\tdelta = delta === undefined ? DELTA : delta;\n\n\tvar _ab = _slicedToArray(ab, 2),\n\t    a = _ab[0],\n\t    b = _ab[1];\n\n\tvar _cd = _slicedToArray(cd, 2),\n\t    c = _cd[0],\n\t    d = _cd[1];\n\n\tvar denom = (b[0] - a[0]) * (d[1] - c[1]) - (b[1] - a[1]) * (d[0] - c[0]);\n\tvar rNumer = (a[1] - c[1]) * (d[0] - c[0]) - (a[0] - c[0]) * (d[1] - c[1]);\n\tvar sNumer = (a[1] - c[1]) * (b[0] - a[0]) - (a[0] - c[0]) * (b[1] - a[1]);\n\n\tif (Math.abs(denom) <= delta) {\n\t\t// parallel\n\t\tif (Math.abs(rNumer) <= delta) {\n\t\t\t// colinear\n\t\t\t// TODO Check if x-projections and y-projections intersect\n\t\t\t// and return the line of intersection if they do.\n\t\t\treturn undefined;\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tvar r = rNumer / denom;\n\tvar s = sNumer / denom;\n\n\tif (0 <= r && r <= 1 && 0 <= s && s <= 1) {\n\t\treturn [a[0] + r * (b[0] - a[0]), a[1] + r * (b[1] - a[1])];\n\t}\n\n\treturn undefined;\n}\n\n/**\r\n * Returns true if the two given 2d line segments intersect, false otherwise.\r\n * @param {number[][]} a - A line segment\r\n * @param {number[][]} b - Another line segment\r\n * @returns {boolean}\r\n */\nfunction doesSegSegIntersect(a, b) {\n\tif (ccw(a[0], a[1], b[0]) * ccw(a[0], a[1], b[1]) > 0) {\n\t\treturn false;\n\t}\n\tif (ccw(b[0], b[1], a[0]) * ccw(b[0], b[1], a[1]) > 0) {\n\t\treturn false;\n\t}\n\n\treturn true;\n}\n\n/** \r\n * Returns the squared distance between two 2d points.\r\n * @param {number[]} p1 - A point\r\n * @param {number[]} p2 - Another point\r\n * @returns {number}\r\n */\nfunction squaredDistanceBetween(p1, p2) {\n\tvar x = p2[0] - p1[0];\n\tvar y = p2[1] - p1[1];\n\n\treturn x * x + y * y;\n}\n\n/**\r\n * Returns a scaled version of the given 2-vector.\r\n * @param {number[]} p - A vector\r\n * @param {number} factor - A scale factor\r\n * @returns {number[]}\r\n */\nfunction scale(p, factor) {\n\treturn [p[0] * factor, p[1] * factor];\n}\n\n/**\r\n * Returns the given 2-vector reversed.\r\n * @param {number[]} p \r\n * @returns {number[]}\r\n */\nfunction reverse(p) {\n\treturn [-p[0], -p[1]];\n}\n\n/**\r\n * Returns the given 2-vector scaled to a length of one.\r\n * @param {number[]} p\r\n * @returns {number[]}\r\n */\nfunction toUnitVector(p) {\n\tvar scaleFactor = 1 / length(p);\n\n\treturn [p[0] * scaleFactor, p[1] * scaleFactor];\n}\n\n/**\r\n * Returns the given 2-vector scaled to the given length.\r\n * @param {number[]} p \r\n * @param {number} length \r\n * @returns {number[]}\r\n */\nfunction toLength(p, len) {\n\tvar scaleFactor = len / length(p);\n\n\treturn [p[0] * scaleFactor, p[1] * scaleFactor];\n}\n\n/** \r\n * Returns the second 2-vector minus the first.\r\n * @param {number[]} p1 - The first vector\r\n * @param {number[]} p2 - The second vector\r\n * @returns {number[]}\r\n */\nfunction fromTo(p1, p2) {\n\treturn [p2[0] - p1[0], p2[1] - p1[1]];\n}\n\n/**\r\n * Performs linear interpolation between two 2d points and returns the resultant point.\r\n * @param {number[]} p1 - The first point.\r\n * @param {number[]} p2 - The second point.\r\n * @param {number} t - The interpolation fraction (usually in [0,1]).  \r\n * @returns {number[]}\r\n */\nfunction interpolate(p1, p2, t) {\n\treturn [p1[0] + (p2[0] - p1[0]) * t, p1[1] + (p2[1] - p1[1]) * t];\n}\n\n/**\r\n * Returns the mean point value of the provided array of two 2d points. \r\n * @param {number[][]} ps - The two points\r\n * @returns {number[]}\r\n */\nfunction mean(ps) {\n\tvar p1 = ps[0];\n\tvar p2 = ps[1];\n\n\treturn [(p1[0] + p2[0]) / 2, (p1[1] + p2[1]) / 2];\n}\n\n/** \r\n * Returns the distance between two 2d points.\r\n * @param {number[]} p1 - A point.\r\n * @param {number[]} p2 - Another point.\r\n * @returns {number}\r\n */\nfunction distanceBetween(p1, p2) {\n\treturn Math.sqrt(squaredDistanceBetween(p1, p2));\n}\n\n/** \r\n * Returns the length of the given 2-vector.\r\n * @param {number[]} p - A vector\r\n * @returns {number}\r\n */\nfunction length(p) {\n\treturn Math.sqrt(p[0] * p[0] + p[1] * p[1]);\n}\n\n/**\r\n * Returns the squared length of the given 2-vector.\r\n * @param {number[]} p - A vector\r\n * @returns {number}\r\n */\nfunction lengthSquared(v) {\n\treturn v[0] * v[0] + v[1] * v[1];\n}\n\n/** \r\n * Returns the Manhattan distance between two 2d points.\r\n * @param {number[]} p1 - A point.\r\n * @param {number[]} p2 - Another point.\r\n * @returns {number}\r\n */\nfunction manhattanDistanceBetween(p1, p2) {\n\treturn Math.abs(p1[0] - p2[0]) + Math.abs(p1[1] - p2[1]);\n}\n\n/** \r\n * Returns the Manhattan length of the given 2-vector.\r\n * @param {number[]} p - A vector\r\n * @returns {number}\r\n */\nfunction manhattanLength(p) {\n\treturn Math.abs(p[0]) + Math.abs(p[1]);\n}\n\n/**\r\n * <p>\r\n * Returns the distance between the given point and line. \r\n * </p>\r\n * <p>\r\n * See <a href=\"https://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line#Line_defined_by_two_points\">\r\n * this Wikipedia article</a>\r\n * </p>\r\n * @param {number[]} p - A point\r\n * @param {number[][]} l - A line\r\n * @returns {number}\r\n */\nfunction distanceBetweenPointAndLine(p, l) {\n\tvar _p = _slicedToArray(p, 2),\n\t    x0 = _p[0],\n\t    y0 = _p[1];\n\n\tvar _l = _slicedToArray(l, 2),\n\t    _l$ = _slicedToArray(_l[0], 2),\n\t    x1 = _l$[0],\n\t    y1 = _l$[1],\n\t    _l$2 = _slicedToArray(_l[1], 2),\n\t    x2 = _l$2[0],\n\t    y2 = _l$2[1];\n\n\tvar y = y2 - y1;\n\tvar x = x2 - x1;\n\n\tvar a = y * x0 - x * y0 + x2 * y1 - y2 * x1;\n\tvar b = Math.sqrt(x * x + y * y);\n\n\treturn Math.abs(a / b);\n}\n\n/**\r\n * Returns the squared distance between the given point and line segment. \r\n * @param {number[]} p - A point\r\n * @param {number[][]} l - A line\r\n * @returns {number}\r\n */\nfunction squaredDistanceBetweenPointAndLineSegment(p, l) {\n\tvar v = l[0];\n\tvar w = l[1];\n\n\tvar l2 = squaredDistanceBetween(v, w);\n\tif (l2 == 0) {\n\t\treturn squaredDistanceBetween(p, v);\n\t}\n\n\tvar t = ((p[0] - v[0]) * (w[0] - v[0]) + (p[1] - v[1]) * (w[1] - v[1])) / l2;\n\tt = Math.max(0, Math.min(1, t));\n\n\tvar d2 = squaredDistanceBetween(p, [v[0] + t * (w[0] - v[0]), v[1] + t * (w[1] - v[1])]);\n\n\treturn d2;\n}\n\n/**\r\n * Returns the circumcenter of the given 2d triangle (given as three 2d points).\r\n * @param {number[][]} triangle \r\n * @returns {number[]}\r\n */\nfunction circumCenter(triangle) {\n\t// See wikipedia\n\tvar p1 = triangle[0];\n\tvar p2 = triangle[1];\n\tvar p3 = triangle[2];\n\n\tvar Sx = 0.5 * det3([lengthSquared(p1), p1[1], 1], [lengthSquared(p2), p2[1], 1], [lengthSquared(p3), p3[1], 1]);\n\n\tvar Sy = 0.5 * det3([p1[0], lengthSquared(p1), 1], [p2[0], lengthSquared(p2), 1], [p3[0], lengthSquared(p3), 1]);\n\n\tvar a = det3([p1[0], p1[1], 1], [p2[0], p2[1], 1], [p3[0], p3[1], 1]);\n\n\tvar b = det3([p1[0], p1[1], lengthSquared(p1)], [p2[0], p2[1], lengthSquared(p2)], [p3[0], p3[1], lengthSquared(p3)]);\n\n\treturn [Sx / a, Sy / a];\n}\n\n/** \r\n * <p>\r\n * Returns the incenter of the given triangle.\r\n * </p>\r\n * <p>\r\n * See Wikipedia - https://en.wikipedia.org/wiki/Incenter \r\n * </p>\r\n * @param {number[][]} triangle \r\n * @returns {number[]}\r\n */\nfunction inCenter(triangle) {\n\tvar p1 = triangle[0];\n\tvar p2 = triangle[1];\n\tvar p3 = triangle[2];\n\n\tvar l1 = distanceBetween(p2, p3);\n\tvar l2 = distanceBetween(p1, p3);\n\tvar l3 = distanceBetween(p1, p2);\n\tvar lengthSum = l1 + l2 + l3;\n\treturn [(l1 * p1[0] + l2 * p2[0] + l3 * p3[0]) / lengthSum, (l1 * p1[1] + l2 * p2[1] + l3 * p3[1]) / lengthSum];\n}\n\n/**\r\n * Returns the centroid of the given polygon, e.g. triangle. The polygon\r\n * must be simple, i.e. not self-intersecting.\r\n * @param {number[][]} polygon \r\n * @returns {number[]}\r\n */\nfunction centroid(polygon) {\n\tif (polygon.length === 3) {\n\t\tvar p1 = polygon[0];\n\t\tvar p2 = polygon[1];\n\t\tvar p3 = polygon[2];\n\n\t\tvar x = p1[0] + p2[0] + p3[0];\n\t\tvar y = p1[1] + p2[1] + p3[1];\n\n\t\treturn [x / 3, y / 3];\n\t}\n\n\t// polygon.length assumed > 3 and assumed to be non-self-intersecting\n\t// See wikipedia\n\n\t// First calculate the area, A, of the polygon\n\tvar A = 0;\n\tfor (var i = 0; i < polygon.length; i++) {\n\t\tvar p0 = polygon[i];\n\t\tvar _p2 = i === polygon.length - 1 ? polygon[0] : polygon[i + 1];\n\n\t\tA = A + (p0[0] * _p2[1] - _p2[0] * p0[1]);\n\t}\n\tA = A / 2;\n\n\tvar C = [0, 0];\n\tfor (var _i = 0; _i < polygon.length; _i++) {\n\t\tvar _p3 = polygon[_i];\n\t\tvar _p4 = _i === polygon.length - 1 ? polygon[0] : polygon[_i + 1];\n\n\t\tC[0] = C[0] + (_p3[0] + _p4[0]) * (_p3[0] * _p4[1] - _p4[0] * _p3[1]);\n\t\tC[1] = C[1] + (_p3[1] + _p4[1]) * (_p3[0] * _p4[1] - _p4[0] * _p3[1]);\n\t}\n\n\treturn [C[0] / (6 * A), C[1] / (6 * A)];\n}\n\n/**\r\n * Calculate the determinant of three 3-vectors, i.e. 3x3 matrix\r\n * @ignore\r\n * @param {number[]} x \r\n * @param {number[]} y\r\n * @param {number[]} z\r\n * @returns {number}\r\n */\nfunction det3(x, y, z) {\n\treturn x[0] * (y[1] * z[2] - y[2] * z[1]) - x[1] * (y[0] * z[2] - y[2] * z[0]) + x[2] * (y[0] * z[1] - y[1] * z[0]);\n}\n\n/**\r\n * Returns the result of adding two 2-vectors. This function is curried.\r\n * @param {number[]} a - A vector\r\n * @param {number[]} b - Another vector\r\n * @param {number[]}\r\n */\nfunction translate(a, b) {\n\tfunction f(b) {\n\t\treturn [a[0] + b[0], a[1] + b[1]];\n\t}\n\n\t// Curry the function\n\treturn b === undefined ? f : f(b);\n}\n\n/**\r\n * Creates a transformation function that operates on multiple points from the \r\n * given arity two function.\r\n * @ignore\r\n */\nfunction createCurriedFunctionArity2(f) {\n\treturn function (a, ps) {\n\t\tvar f1 = f(a); // Cache for speed\n\t\tvar fPs = function fPs(ps) {\n\t\t\treturn ps.map(f1);\n\t\t};\n\n\t\t// Curry the function\n\t\treturn ps === undefined ? fPs : fPs(ps);\n\t};\n}\n\n/**\r\n * Creates a transformation function that operates on multiple points from the \r\n * given curried arity three function.\r\n * @ignore\r\n */\nfunction createCurriedFunctionArity3(f) {\n\treturn function (a, b, ps) {\n\t\tvar f2 = f(a, b); // Cache for speed\n\t\tvar fPs = function fPs(ps) {\n\t\t\treturn ps.map(f2);\n\t\t};\n\n\t\t// Curry the function\n\t\treturn ps === undefined ? fPs : fPs(ps);\n\t};\n}\n\n/**\r\n * Return the given 2d points translated by the given 2d vector. This function\r\n * is curried.\r\n * @param {number} sinθ\r\n * @param {number} cosθ\r\n * @param {number[][]} ps \r\n * @returns {number[][]}\r\n */\nvar rotatePs = createCurriedFunctionArity3(rotate);\n\n/**\r\n * Return the given 2d points translated by the given 2d vector. This function\r\n * is curried.\r\n * @param {number[]} v \r\n * @param {number[][]} ps \r\n * @returns {number[][]}\r\n */\nvar translatePs = createCurriedFunctionArity2(translate);\n\n/**\r\n * Returns a rotated version of the given 2-vector given the sine and cosine of the angle.\r\n * @param {number} sinθ\r\n * @param {number} cosθ\r\n * @param {number[]} p\r\n * @returns {number[]}\r\n */\nfunction rotate(sinθ, cosθ, p) {\n\tfunction rotateByθ(p) {\n\t\treturn [p[0] * cosθ - p[1] * sinθ, p[0] * sinθ + p[1] * cosθ];\n\t}\n\n\t// Curry the function\n\treturn p === undefined ? rotate : rotateByθ(p);\n}\n\n/**\r\n * Returns true if two 2-vectors are identical, false otherwise.\r\n * @param {number[]} a\r\n * @param {number[]} b\r\n * @returns {boolean}\r\n */\nfunction equal(a, b) {\n\treturn a[0] === b[0] && a[1] === b[1];\n}\n\n/**\r\n * Returns a anti-clockwise rotated version of the given 2-vector given the sine \r\n * and cosine of the angle.\r\n * @param {number[]} p \r\n * @param {number} sinθ\r\n * @param {number} cosθ\r\n * @returns {number[]}\r\n */\nfunction reverseRotate(sinθ, cosθ, p) {\n\treturn [+p[0] * cosθ + p[1] * sinθ, -p[0] * sinθ + p[1] * cosθ];\n}\n\n/**\r\n * Returns a 90 degrees rotated version of the given 2-vector.\r\n * @param {number[]} p \r\n * @returns {number[]}\r\n */\nfunction rotate90Degrees(p) {\n\treturn [-p[1], p[0]];\n}\n\n/**\r\n * Returns a negative 90 degrees rotated version of the given 2-vector.\r\n * @param {number[]} p \r\n * @returns {number[]}\r\n */\nfunction rotateNeg90Degrees(p) {\n\treturn [p[1], -p[0]];\n}\n\n/**\r\n * Transforms the given 2-vector by applying the given function to each coordinate.\r\n * @param {number[]} p \r\n * @param {function} f \r\n * @returns {*[]}\r\n */\nfunction transform(p, f) {\n\treturn [f(p[0]), f(p[1])];\n}\n\n/**\r\n * Returns the closest point to the array of 2d points, optionally providing a distance function.\r\n * @param {number[]} p\r\n * @param {number[][]} ps\r\n * @param {function} f - Distance function - if undefined uses squaredDistanceBetween\r\n */\nfunction getClosestTo(p, ps, f) {\n\tf = f === undefined ? squaredDistanceBetween : f;\n\n\tvar cp = undefined; // Closest Point\n\tvar bestd = Number.POSITIVE_INFINITY;\n\tfor (var i = 0; i < ps.length; i++) {\n\t\tvar p_ = ps[i];\n\n\t\tvar d = f(p, p_);\n\t\tif (d < bestd) {\n\t\t\tcp = p_;\n\t\t\tbestd = d;\n\t\t}\n\t}\n\n\treturn cp;\n}\n\n/** \r\n * Returns an array of points by applying a translation and then rotation to the given points.\r\n * @param {number[]} v - The translation vector\r\n * @param {number} sinθ \r\n * @param {number} cosθ\r\n * @param {number[][]} ps - The input points\r\n * @returns {number[][]}\r\n **/\nfunction translateThenRotatePs(v, sinθ, cosθ, ps) {\n\treturn ps.map(function (p) {\n\t\treturn rotate(sinθ, cosθ, translate(v, p));\n\t});\n}\n\n/** \r\n * Returns an array of points by applying a rotation and then translation to the given points.\r\n * @param {number} sinθ \r\n * @param {number} cosθ\r\n * @param {number[]} v - The translation vector\r\n * @param {number[][]} ps - The input points\r\n * @returns {number[][]}\r\n **/\nfunction rotateThenTranslatePs(sinθ, cosθ, v, ps) {\n\treturn ps.map(function (p) {\n\t\treturn translate(v, rotate(sinθ, cosθ, p));\n\t});\n}\n\n/*\r\n * Purely functional 2d vector utilities.\r\n */\nvar Vector = {\n\tdot: dot,\n\tcross: cross,\n\tccw: ccw,\n\tsegSegIntersection: segSegIntersection,\n\tdoesSegSegIntersect: doesSegSegIntersect,\n\tsquaredDistanceBetween: squaredDistanceBetween,\n\tscale: scale,\n\treverse: reverse,\n\ttranslate: translate,\n\ttoUnitVector: toUnitVector,\n\ttoLength: toLength,\n\tfromTo: fromTo,\n\tinterpolate: interpolate,\n\tmean: mean,\n\tdistanceBetween: distanceBetween,\n\tlength: length,\n\tlengthSquared: lengthSquared,\n\tmanhattanDistanceBetween: manhattanDistanceBetween,\n\tmanhattanLength: manhattanLength,\n\tdistanceBetweenPointAndLine: distanceBetweenPointAndLine,\n\tsquaredDistanceBetweenPointAndLineSegment: squaredDistanceBetweenPointAndLineSegment,\n\tcircumCenter: circumCenter,\n\tinCenter: inCenter,\n\tcentroid: centroid,\n\tequal: equal,\n\trotate: rotate,\n\trotatePs: rotatePs,\n\treverseRotate: reverseRotate,\n\trotate90Degrees: rotate90Degrees,\n\trotateNeg90Degrees: rotateNeg90Degrees,\n\ttransform: transform,\n\tgetClosestTo: getClosestTo,\n\ttranslatePs: translatePs,\n\ttranslateThenRotatePs: translateThenRotatePs,\n\trotateThenTranslatePs: rotateThenTranslatePs\n};\n\nmodule.exports = Vector;\n\n},{}]},{},[1])(1)\n});"]}